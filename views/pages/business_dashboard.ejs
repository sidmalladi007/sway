<!doctype html>
<html lang="en">

  <head>
    <title>Shopper Dashboard</title>
    <% include ../partials/head %>
    <% include ../partials/scripts %>
  </head>

  <body>
    <div class="wrapper">
    <div class="sidebar" data-color="orange" data-image="/img/full-screen-image-3.jpg">
        <div class="logo">
          <a href="/" class="logo-text">Sway</a>
        </div>

    	<div class="sidebar-wrapper">

            <div class="user">
                <div class="photo">
                    <img src="/img/cafe.png">
                </div>
                <div class="info">
                    <a data-toggle="collapse" href="#collapseExample" class="collapsed">
                        <%= fullName %>
                        <b class="caret"></b>
                    </a>
                    <div class="collapse" id="collapseExample">
                        <ul class="nav">
                        </ul>
                    </div>
                </div>
            </div>

            <ul class="nav">
              <li><a href="/business/dashboard"><i class="pe-7s-gift"></i><p>Dashboard</p></a></li>
              <li><a href="/business/new-campaign"><i class="pe-7s-graph"></i><p>New Campaign</p></a></li>
            </ul>
    	</div>
    </div>

    <div class="main-panel">
        <nav class="navbar navbar-default">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#">Dashboard</a>
                </div>
                <div class="collapse navbar-collapse">

                    <form class="navbar-form navbar-left navbar-search-form" role="search">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="fa fa-search"></i></span>
                            <input type="text" value="" class="form-control" placeholder="Search...">
                        </div>
                    </form>

                    <ul class="nav navbar-nav navbar-right">

                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="fa fa-gavel"></i>
                                <p class="hidden-md hidden-lg">
                                    Actions
                                    <b class="caret"></b>
                                </p>
                            </a>
                            <ul class="dropdown-menu">
                            </ul>
                        </li>

                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="fa fa-bell-o"></i>
                                <span class="notification"></span>
                                <p class="hidden-md hidden-lg">
                    Notifications
                    <b class="caret"></b>
                  </p>
                            </a>
                            <ul class="dropdown-menu">
                            </ul>
                        </li>

                        <li class="dropdown dropdown-with-icons">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="fa fa-list"></i>
                                <p class="hidden-md hidden-lg">
                    More
                    <b class="caret"></b>
                  </p>
                            </a>
                            <ul class="dropdown-menu dropdown-with-icons">
                                <li><a href="/logout" class="text-danger"><i class="pe-7s-close-circle"></i>Log out</a></li>
                            </ul>
                        </li>

                    </ul>
                </div>
            </div>
        </nav>

        <div class="content">
            <div class="container-fluid">
              <div class="row">
              <div class="col-md-3 col-sm-6 col-xs-12">
                <div class="info-box">
                  <span class="info-box-icon bg-aqua"><i style="padding-left:20px; float:left; margin-top: 20px;" class="fa fa-users"></i></span>
                  <div style="text-align:center;" class="info-box-content">
                    <span class="info-box-text" style="font-size:15px; padding-top:17px;">Average Daily Users</span>
                    <span class="info-box-number" style="font-size:25px;">193<small></small></span>
                  </div><!-- /.info-box-content -->
                </div><!-- /.info-box -->
              </div><!-- /.col -->
              <div class="col-md-3 col-sm-6 col-xs-12">
                <div class="info-box">
                  <span class="info-box-icon bg-red"><i style="padding-left:20px; float:left; margin-top: 20px;" class="fa fa-calendar"></i></span>
                  <div style="text-align:center;" class="info-box-content">
                    <span class="info-box-text" style="font-size:15px; padding-top:17px;">Average Daily Rewards Given</span>
                    <span class="info-box-number" style="font-size:25px;">23</span>
                  </div><!-- /.info-box-content -->
                </div><!-- /.info-box -->
              </div><!-- /.col -->

              <!-- fix for small devices only -->
              <div class="clearfix visible-sm-block"></div>

              <div class="col-md-3 col-sm-6 col-xs-12">
                <div style="text-align:center;" class="info-box">
                  <span class="info-box-icon bg-green"><i style="padding-left:20px; float:left; margin-top: 20px;" class="fa fa-clock-o"></i></span>
                  <div class="info-box-content">
                    <span class="info-box-text" style="font-size:15px; padding-top:17px;">Average Time Until Next Visit</span>
                    <span class="info-box-number" style="font-size:25px;">10 days</span>
                  </div><!-- /.info-box-content -->
                </div><!-- /.info-box -->
              </div><!-- /.col -->
              <div class="col-md-3 col-sm-6 col-xs-12">
                <div style="text-align:center;" class="info-box">
                  <span class="info-box-icon bg-yellow"><i style="padding-left:20px; float:left; margin-top: 20px;" class="fa fa-smile-o"></i></span>
                  <div class="info-box-content">
                    <span class="info-box-text" style="font-size:15px; padding-top:17px;">Rewards Reimbursed</span>
                    <span class="info-box-number" style="font-size:25px;">$1234</span>
                  </div><!-- /.info-box-content -->
                </div><!-- /.info-box -->
              </div><!-- /.col -->
            </div><!-- /.row -->



          <div class="content">
              <div class="container-fluid">

                  <div class="row">
                      <div class="col-md-6">
                          <div class="card">
                              <div class="header">
                                  Customers Who Availed
                                  <!-- <p class="category">Multiple Lines Charts</p> -->
                              </div>
                              <div class="content">
                                  <div id="chartBehaviour" class="ct-chart ct-perfect-fourth"></div>
                              </div>
                              <div class="footer">
                                  <h6>Legend</h6>
                                   <i class="fa fa-circle text-info"></i> Campaign 1
                                   <i class="fa fa-circle text-danger"></i> Campaign 2
                                   <i class="fa fa-circle text-warning"></i> Campaign 3
                              </div>
                          </div>
                      </div>

                      <div class="col-md-6">
                          <div class="card">
                              <div class="header">
                                  Customer Breakdown
                                  <!-- <p class="category">Pie Chart</p> -->
                              </div>
                              <div class="content">
                                  <div id="chartPreferences" class="ct-chart ct-perfect-fourth"></div>
                              </div>
                              <div class="footer">
                                  <h6>Legend</h6>
                                   <i class="fa fa-circle text-info"></i> New Customers
                                   <!-- <i class="fa fa-circle text-warning"></i> Samsung -->
                                   <i class="fa fa-circle text-danger"></i> Repeat Customers
                              </div>
                          </div>
                      </div>
                  </div>

  								</div>
  				</div>
      </div>
      <% if (campaigns.length > 0) { %>
      <div class="row">
              <div class="col-md-12">
                  <div class="card">


  <div class="toolbar">
  <!--        Here you can write extra buttons/actions for the toolbar              -->
</div><br>
    <h2 style="text-align:center">Loyalty Programs</h2><hr>
  <table id="campaigns-table" class="table">
  <thead>
  <th class="text-center" data-field="name" data-sortable="true">Campaign Name</th>
  <th class="text-center" data-field="goal" data-sortable="true">Goal</th>
  <th class="text-center" data-field="reward" data-sortable="true">Reward</th>
  <th class="text-center" data-field="dates" data-sortable="true">Dates</th>
  </thead>
  <tbody>
    <% campaigns.forEach(function(campaign) { %>
    <tr>
      <td class="text-center"><%= campaign.name %></td>
      <td class="text-center"><%= campaign.numVisits %> visits @ $<%= campaign.minSpent %>/purchase</td>
      <td class="text-center"><%= campaign.rewardName %> (up to $<%= campaign.maxReward %>)</td>
      <td class="text-center"><%= campaign.startDate %> - <%= campaign.endDate %></td>
    </tr>
    <% }); %>
  </tbody>
  </table>

  <!-- the javascript for the datatables -->
  <script type="text/javascript">
  var $table = $('#campaigns-table');

  $().ready(function(){
    $table.bootstrapTable({
        showColumns: true,
        pagination: true,
        pageSize: 8,
        clickToSelect: false,
        pageList: [8,10,25,50,100],

        formatShowingRows: function(pageFrom, pageTo, totalRows){
            //do nothing here, we don't want to show the text "showing x of y from..."
        },
        formatRecordsPerPage: function(pageNumber){
            return pageNumber + " rows visible";
        },
        icons: {
            refresh: 'fa fa-refresh',
            toggle: 'fa fa-th-list',
            columns: 'fa fa-columns',
            detailOpen: 'fa fa-plus-circle',
            detailClose: 'fa fa-minus-circle'
        }
    });

    //activate the tooltips after the data table is initialized
    $('[rel="tooltip"]').tooltip();

    $(window).resize(function () {
        $table.bootstrapTable('resetView');
    });

    window.operateEvents = {
        'click .view': function (e, value, row, index) {
            info = JSON.stringify(row);

            swal('You click view icon, row: ', info);
            console.log(info);
        },
        'click .edit': function (e, value, row, index) {
            info = JSON.stringify(row);

            swal('You click edit icon, row: ', info);
            console.log(info);
        },
        'click .remove': function (e, value, row, index) {
            console.log(row);
            $table.bootstrapTable('remove', {
                field: 'id',
                values: [row.id]
            });
        }
    };
  });

  function operateFormatter(value, row, index) {
    return [
        '<a rel="tooltip" title="View" class="btn btn-simple btn-info btn-icon table-action view" href="javascript:void(0)">',
            '<i class="fa fa-image"></i>',
        '</a>',
        '<a rel="tooltip" title="Edit" class="btn btn-simple btn-warning btn-icon table-action edit" href="javascript:void(0)">',
            '<i class="fa fa-edit"></i>',
        '</a>',
        '<a rel="tooltip" title="Remove" class="btn btn-simple btn-danger btn-icon table-action remove" href="javascript:void(0)">',
            '<i class="fa fa-remove"></i>',
        '</a>'
    ].join('');
  }


  </script>
</div>
</div>
</div>
<% } %>
      <div class="row">
              <div class="col-md-12">
                  <div class="card">


  <div class="toolbar">
  <!--        Here you can write extra buttons/actions for the toolbar              -->
</div><br>
    <h2 style="text-align:center">Rewards Members</h2><hr>
  <table id="customers-table" class="table">
  <thead>
  <th class="text-center" data-field="customer" data-sortable="true">Customer</th>
  <th class="text-center" data-field="numberofvisits" data-sortable="true">Number of Visits</th>
  <th class="text-center" data-field="totalspent" data-sortable="true">Total Spent ($)</th>
  </thead>
  <tbody>
    <tr>
      <td>Elon Musk</td>
      <td>12</td>
      <td>39.45</td>
    </tr>
    <tr>
      <td>Sergey Brin</td>
      <td>3</td>
      <td>12.27</td>
    </tr>
    <tr>
      <td>Sheryl Sandberg</td>
      <td>5</td>
      <td>18.72</td>
    </tr>
    <tr>
      <td>Jeff Bezos</td>
      <td>1</td>
      <td>3.48</td>
    </tr>
    <tr>
      <td>Mark Benioff</td>
      <td>7</td>
      <td>22.45</td>
    </tr>
    <tr>
      <td>Mark Zuckerberg</td>
      <td>9</td>
      <td>27.98</td>
    </tr>
    <tr>
      <td>Peter Thiel</td>
      <td>11</td>
      <td>32.44</td>
    </tr>
    <tr>
      <td>Larry Page</td>
      <td>10</td>
      <td>36.45</td>
    </tr>
    <tr>
      <td>Satya Nadella</td>
      <td>4</td>
      <td>14.04</td>
    </tr>
  </tbody>
  </table>

  <!-- the javascript for the datatables -->
  <script type="text/javascript">
  var $table = $('#customers-table');

  $().ready(function(){
    $table.bootstrapTable({
        showColumns: true,
        pagination: true,
        pageSize: 8,
        clickToSelect: false,
        pageList: [8,10,25,50,100],

        formatShowingRows: function(pageFrom, pageTo, totalRows){
            //do nothing here, we don't want to show the text "showing x of y from..."
        },
        formatRecordsPerPage: function(pageNumber){
            return pageNumber + " rows visible";
        },
        icons: {
            refresh: 'fa fa-refresh',
            toggle: 'fa fa-th-list',
            columns: 'fa fa-columns',
            detailOpen: 'fa fa-plus-circle',
            detailClose: 'fa fa-minus-circle'
        }
    });

    //activate the tooltips after the data table is initialized
    $('[rel="tooltip"]').tooltip();

    $(window).resize(function () {
        $table.bootstrapTable('resetView');
    });

    window.operateEvents = {
        'click .view': function (e, value, row, index) {
            info = JSON.stringify(row);

            swal('You click view icon, row: ', info);
            console.log(info);
        },
        'click .edit': function (e, value, row, index) {
            info = JSON.stringify(row);

            swal('You click edit icon, row: ', info);
            console.log(info);
        },
        'click .remove': function (e, value, row, index) {
            console.log(row);
            $table.bootstrapTable('remove', {
                field: 'id',
                values: [row.id]
            });
        }
    };
  });

  function operateFormatter(value, row, index) {
    return [
        '<a rel="tooltip" title="View" class="btn btn-simple btn-info btn-icon table-action view" href="javascript:void(0)">',
            '<i class="fa fa-image"></i>',
        '</a>',
        '<a rel="tooltip" title="Edit" class="btn btn-simple btn-warning btn-icon table-action edit" href="javascript:void(0)">',
            '<i class="fa fa-edit"></i>',
        '</a>',
        '<a rel="tooltip" title="Remove" class="btn btn-simple btn-danger btn-icon table-action remove" href="javascript:void(0)">',
            '<i class="fa fa-remove"></i>',
        '</a>'
    ].join('');
  }


  </script>
</div>
</div>
</div>
  </div>
  <% include ../partials/footer %>
</div>
</div>
</body>
<script>
  $().ready(function(){
    demo.initCharts();
  });
</script>
</html>
